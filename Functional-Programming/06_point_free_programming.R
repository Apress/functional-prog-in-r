## ------------------------------------------------------------------------
compose <- function(g, f) function(...) g(f(...))

## ---- echo=FALSE---------------------------------------------------------
curry2 <- function(f) function(x) function(y) f(x, y)

## ------------------------------------------------------------------------
umap <- compose(unlist, Map)
umap(curry2(`+`)(2), 1:4)

## ------------------------------------------------------------------------
library(pryr)
umap <- unlist %.% Map
umap(curry2(`+`)(2), 1:4)

## ------------------------------------------------------------------------
rmse <- sqrt %.% mean %.% function(x, y) (x - y)**2
rmse(1:4, 2:5)

## ------------------------------------------------------------------------
`%;%` <- function(f, g) function(...) g(f(...))
rmse <- (function(x, y) (x - y)**2) %;% mean %;% sqrt
rmse(1:4, 2:5)

## ------------------------------------------------------------------------
library(magrittr)
1:4 %>% mean %>% sqrt

## ------------------------------------------------------------------------
rnorm(4) %>% data.frame(x = ., y = cos(.))

## ------------------------------------------------------------------------
rnorm(4) %>% data.frame(x = sin(.), y = cos(.))

## ------------------------------------------------------------------------
mean_sqrt <- 1:4 %>% mean %>% sqrt
mean_sqrt

## ------------------------------------------------------------------------
mean_sqrt <- . %>% mean %>% sqrt
mean_sqrt(1:4)

## ------------------------------------------------------------------------
1:4 %>% mean_sqrt

## ------------------------------------------------------------------------
rmse <- . %>% { (.$x - .$y)**2 } %>% mean %>% sqrt
data.frame(x = 1:4, y = 2:5) %>% rmse

## ------------------------------------------------------------------------
rnorm(4) %>% { data.frame(x = sin(.), y = cos(.)) }

